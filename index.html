<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SATELLITE CORE V8</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div id="meta-bar">Ładowanie protokołu...</div>
        <h1>SATELLITE CORE</h1>
        <div class="status-badge">LIVE DECISION ENGINE</div>
    </header>

    <main id="app">
        <section id="decisions">
            <h2 class="section-title">DECISION SUMMARY</h2>
            <div id="decision-container"></div>
        </section>

        <section id="intelligence">
            <h2 class="section-title">INTELLIGENCE & COMPARISON</h2>
            <div id="signals-container"></div>
            <div id="comparisons-container"></div>
        </section>

        <section id="security">
            <h2 class="section-title">WARNINGS & EXCLUSIONS</h2>
            <div id="warnings-container"></div>
        </section>
    </main>

    <script>
        async function loadSatelliteData() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                
                // Meta
                document.getElementById('meta-bar').innerText = 
                    `WINDOW: ${data.meta.analysis_window_days}D | CONFIDENCE: ${(data.meta.confidence_overall * 100).toFixed(0)}% | ${data.meta.generated_at}`;

                // Render Decyzji
                const dContainer = document.getElementById('decision-container');
                // Łączymy wszystkie decyzje z summary w jedną listę do renderowania
                const allDecisions = [...(data.deep_analysis || [])];
                
                dContainer.innerHTML = allDecisions.map(d => `
                    <div class="card decision-card ${d.decision.toLowerCase()}">
                        <div class="card-header">
                            <span class="domain-tag">${d.domain.toUpperCase()}</span>
                            <span class="decision-tag">${d.decision}</span>
                        </div>
                        <h3>${d.niche_or_area}</h3>
                        <p class="reason">${d.reason_short}</p>
                        <div class="do-not">❌ DO NOT: ${d.do_not}</div>
                        <div class="card-footer">
                            <span>RISK: ${d.risk_level}</span>
                            <span>HORIZON: ${d.time_horizon}</span>
                        </div>
                    </div>
                `).join('');

                // Render Sygnałów
                const sContainer = document.getElementById('signals-container');
                sContainer.innerHTML = data.signals.map(s => `
                    <div class="signal-mini">
                        <span class="dir-${s.direction}">${s.direction === 'up' ? '▲' : '▼'}</span>
                        <strong>${s.metric}:</strong> ${s.value} (${s.source})
                    </div>
                `).join('');

                // Render Ostrzeżeń
                const wContainer = document.getElementById('warnings-container');
                wContainer.innerHTML = data.warnings.map(w => `
                    <div class="warning-alert impact-${w.impact}">
                        <strong>⚠️ ${w.issue.toUpperCase()}</strong>: ${w.description}
                    </div>
                `).join('');

            } catch (e) {
                console.error("Błąd ładowania danych:", e);
                document.getElementById('meta-bar').innerText = "BŁĄD DANYCH - SPRAWDŹ data.json";
            }
        }
        window.onload = loadSatelliteData;
    </script>
</body>
</html>